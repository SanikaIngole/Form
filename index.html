<!doctype html>
<html lang="mr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡§∞‡§æ‡§Æ‡§æ‡§®‡§Ç‡§¶‡§æ‡§ö‡§æ‡§∞‡•ç‡§Ø ‡§®‡§∞‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡§æ‡§ö‡§æ‡§∞‡•ç‡§Ø‡§ú‡•Ä ‡§Ø‡§æ‡§Ç‡§ö‡§æ ‡§™‡§æ‡§¶‡•Å‡§ï‡§æ ‡§¶‡§∞‡•ç‡§∂‡§® ‡§∏‡•ã‡§π‡§≥‡§æ ‚Äî ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#FFF7ED;--card:#fff;--accent:#FF7043;--muted:#616161;--radius:12px;font-family:Inter,system-ui,-apple-system,sans-serif}
*{box-sizing:border-box}html,body{height:100%;margin:0;background:var(--bg);color:#222}
.container{max-width:900px;margin:24px auto;padding:18px}
.header{background:linear-gradient(90deg,#ffe0d6,#fff1ea);padding:18px;border-radius:14px;display:flex;gap:12px;align-items:flex-start}
.title{font-size:20px;font-weight:700;color:#3d2518;margin:0}
.meta{font-size:13px;color:var(--muted);margin-top:6px}
.card{background:var(--card);padding:16px;border-radius:12px;margin-top:14px;box-shadow:0 8px 30px rgba(0,0,0,0.06)}
.instructions{font-size:14px;color:#333}
.form-grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
@media(min-width:760px){.form-grid{grid-template-columns:1fr 1fr}}
.field{display:flex;flex-direction:column;gap:8px}
label{font-weight:700;font-size:14px;color:#2a2a2a}
input,select,textarea{padding:10px;border-radius:10px;border:1px solid #e9e9e9;font-size:14px;background:#fff}
textarea{min-height:80px;resize:vertical}
.required{color:#d63a2a;margin-left:6px}
.actions{display:flex;gap:10px;align-items:center;margin-top:12px;flex-wrap:wrap}
.btn{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
.btn.ghost{background:transparent;border:1px solid rgba(255,112,67,0.16);color:var(--accent)}
.small{font-size:13px;color:var(--muted)}
.success{background:#e9f6ea;border-left:4px solid #43a047;padding:10px;border-radius:8px;color:#165c2c;font-weight:600;margin-top:10px}
.footer{font-size:13px;color:var(--muted);text-align:center;margin-top:18px}
</style>
</head>
<body>
<main class="container">
<header class="header" role="banner" aria-labelledby="formTitle">
  <div style="flex:1">
    <h1 class="title" id="formTitle">‡§∞‡§æ‡§Æ‡§æ‡§®‡§Ç‡§¶‡§æ‡§ö‡§æ‡§∞‡•ç‡§Ø ‡§®‡§∞‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡§æ‡§ö‡§æ‡§∞‡•ç‡§Ø‡§ú‡•Ä ‡§Ø‡§æ‡§Ç‡§ö‡§æ ‡§™‡§æ‡§¶‡•Å‡§ï‡§æ ‡§¶‡§∞‡•ç‡§∂‡§® ‡§∏‡•ã‡§π‡§≥‡§æ</h1>
    <div class="meta">‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï: 12 ‡§°‡§ø‡§∏‡•á‡§Ç‡§¨‡§∞ 2025 ‚Äî ‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞, ‡§∏‡§ï‡§æ‡§≥‡•Ä 9 ‡§µ‡§æ‡§ú‡§§‡§æ</div>
    <div class="meta">‡§∏‡•ç‡§•‡§≥: ‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú‡§æ ‡§Ö‡§ó‡•ç‡§∞‡§∏‡•á‡§® ‡§≠‡§µ‡§®, ‡§™‡§∞‡§§‡§µ‡§æ‡§°‡§æ -‡§Ö‡§Ç‡§ú‡§®‡§ó‡§æ‡§µ ‡§∞‡•ã‡§°‡§µ‡§∞, ‡§™‡§∞‡§§‡§µ‡§æ‡§°‡§æ, ‡§§‡§æ. ‡§Ö‡§ö‡§≤‡§™‡•Ç‡§∞, ‡§ú‡§ø‡§≤‡•ç‡§π‡§æ ‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä</div>
  </div>
  <div style="min-width:150px;text-align:right">
    <div style="background:#fff;padding:8px;border-radius:10px;font-weight:700;color:#3d2518">‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§´‡•â‡§∞‡•ç‡§Æ</div>
    <div class="small" style="margin-top:8px">‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ</div>
  </div>
</header>

<section class="card" aria-label="‡§∏‡•Ç‡§ö‡§®‡§æ">
  <div style="display:flex;gap:10px;align-items:flex-start">
    <div style="font-size:20px">üå∏</div>
    <div>
      <div style="font-weight:700">‡§â‡§™‡§æ‡§∏‡§ï ‡§¶‡§ø‡§ï‡•ç‡§∑‡§æ ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä</div>
      <p class="instructions small" style="margin:6px 0 0 0">
        ‚Ä¢ ‡§ú‡•ç‡§Ø‡§æ ‡§≠‡§ï‡•ç‡§§‡§ó‡§£‡§æ‡§Ç‡§®‡§æ ‡§∏‡§¶‡§∞ ‡§™‡§æ‡§¶‡•Å‡§ï‡§æ ‡§¶‡§∞‡•ç‡§∂‡§® ‡§∏‡•ã‡§π‡§≥‡•ç‡§Ø‡§æ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§â‡§™‡§æ‡§∏‡§ï ‡§¶‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ò‡•ç‡§Ø‡§æ‡§Ø‡§ö‡•Ä ‡§Ü‡§π‡•á, ‡§§‡•ç‡§Ø‡§æ‡§Ç‡§®‡•Ä ‡§ñ‡§æ‡§≤‡•Ä‡§≤ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡•Ç‡§® ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§æ‡§µ‡§æ.<br>
        ‚Ä¢ ‡§â‡§™‡§æ‡§∏‡§ï ‡§¶‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ò‡•á‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§µ‡§Ø ‡§ï‡§ø‡§Æ‡§æ‡§® 7 ‡§µ‡§∞‡•ç‡§∑ ‡§Ö‡§∏‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.
      </p>
    </div>
  </div>
</section>

<form id="regForm" class="card" autocomplete="off" novalidate>
  <div class="form-grid">
    <div class="field">
      <label for="name">‡§®‡§æ‡§µ <span class="required">*</span></label>
      <input id="name" name="name" type="text" required placeholder="‡§Ü‡§™‡§≤‡•á ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§µ">
    </div>
    <div class="field">
      <label for="phone">‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞ <span class="required">*</span></label>
      <input id="phone" name="phone" type="tel" inputmode="numeric" pattern="[0-9]{10}" required placeholder="‡•Ø‡•ÆXXXXXXXX">
      <div class="small">10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡§æ</div>
    </div>
    <div class="field">
      <label for="census">‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§®‡§Ç‡§¨‡§∞</label>
      <input id="census" name="census" type="text" placeholder="(‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§ü‡§æ‡§ï‡§æ)">
    </div>
    <div class="field">
      <label for="age">‡§µ‡§Ø <span class="required">*</span></label>
      <input id="age" name="age" type="text" inputmode="numeric" pattern="\d+" required placeholder="‡§â‡§¶‡§æ. 20">
    </div>
    <div class="field">
      <label for="district">‡§ú‡§ø‡§≤‡•ç‡§π‡§æ <span class="required">*</span></label>
      <select id="district" name="district" required>
        <option value="‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä" selected>‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä</option>
        <option value="‡§á‡§§‡§∞">‡§á‡§§‡§∞</option>
      </select>
    </div>
    <div class="field">
      <label for="taluka">‡§§‡§æ‡§≤‡•Å‡§ï‡§æ <span class="required">*</span></label>
      <select id="taluka" name="taluka" required>
        <option value="‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä">‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä</option>
        <option value="‡§Ö‡§Ç‡§ú‡§®‡§ó‡§æ‡§µ ‡§∏‡•Å‡§∞‡•ç‡§ú‡•Ä">‡§Ö‡§Ç‡§ú‡§®‡§ó‡§æ‡§µ ‡§∏‡•Å‡§∞‡•ç‡§ú‡•Ä</option>
        <option value="‡§Ö‡§ö‡§≤‡§™‡•Ç‡§∞">‡§Ö‡§ö‡§≤‡§™‡•Ç‡§∞</option>
        <option value="‡§®‡§æ‡§Ç‡§¶‡§ó‡§æ‡§µ ‡§ñ‡§Ç‡§°‡•á‡§∂‡•ç‡§µ‡§∞">‡§®‡§æ‡§Ç‡§¶‡§ó‡§æ‡§µ ‡§ñ‡§Ç‡§°‡•á‡§∂‡•ç‡§µ‡§∞</option>
        <option value="‡§Æ‡•ã‡§∞‡•ç‡§∂‡•Ä">‡§Æ‡•ã‡§∞‡•ç‡§∂‡•Ä</option>
        <option value="‡§µ‡§∞‡•Å‡§°">‡§µ‡§∞‡•Å‡§°</option>
        <option value="‡§§‡§ø‡§µ‡§∏‡§æ">‡§§‡§ø‡§µ‡§∏‡§æ</option>
        <option value="‡§≠‡§æ‡§§‡§ï‡•Å‡§≤‡•Ä">‡§≠‡§æ‡§§‡§ï‡•Å‡§≤‡•Ä</option>
        <option value="‡§ö‡§æ‡§Ç‡§¶‡•Ç‡§∞‡§¨‡§æ‡§ú‡§æ‡§∞">‡§ö‡§æ‡§Ç‡§¶‡•Ç‡§∞‡§¨‡§æ‡§ú‡§æ‡§∞</option>
        <option value="‡§¶‡§∞‡•ç‡§Ø‡§æ‡§™‡•Ç‡§∞">‡§¶‡§∞‡•ç‡§Ø‡§æ‡§™‡•Ç‡§∞</option>
        <option value="‡§ß‡§æ‡§Æ‡§£‡§ó‡§æ‡§µ¬†‡§∞‡•á‡§≤‡•ç‡§µ‡•á">‡§ß‡§æ‡§Æ‡§£‡§ó‡§æ‡§µ¬†‡§∞‡•á‡§≤‡•ç‡§µ‡•á</option>
        <option value="‡§ö‡§æ‡§Ç‡§¶‡•Ç‡§∞ ‡§∞‡•á‡§≤‡•ç‡§µ‡•á">‡§ö‡§æ‡§Ç‡§¶‡•Ç‡§∞ ‡§∞‡•á‡§≤‡•ç‡§µ‡•á</option>
        <option value="‡§ß‡§æ‡§∞‡§£‡•Ä">‡§ß‡§æ‡§∞‡§£‡•Ä</option>
        <option value="‡§ö‡§ø‡§ñ‡§≤‡§¶‡§∞‡§æ">‡§ö‡§ø‡§ñ‡§≤‡§¶‡§∞‡§æ</option>
        <option value="‡§á‡§§‡§∞">‡§á‡§§‡§∞</option>
      </select>
    </div>
    <div class="field" style="grid-column:1/-1">
      <label for="village">‡§Æ‡•Å‡§ï‡•ç‡§ï‡§æ‡§Æ‡§æ‡§ö‡•á ‡§ó‡§æ‡§µ <span class="required">*</span></label>
      <input id="village" name="village" type="text" required placeholder="‡§Ü‡§™‡§≤‡•á ‡§ó‡§æ‡§µ (‡§Æ‡•Å‡§ï‡•ç‡§ï‡§æ‡§Æ)">
    </div>
    <div class="field" style="grid-column:1/-1">
      <label for="notes">‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä / ‡§Ö‡§°‡§ö‡§£‡•Ä</label>
      <textarea id="notes" name="notes" placeholder="‡§ï‡§æ‡§π‡•Ä ‡§Ö‡§°‡§ö‡§£ ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§≤‡§ø‡§π‡§æ"></textarea>
    </div>
  </div>

  <div style="margin-top:12px" class="small">
    ‡§ï‡§æ‡§π‡•Ä ‡§Ö‡§°‡§ö‡§£ ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: 9922411193, 9371624404, 8983425389, 9145652208, 9923567257, 9623009466
  </div>

  <div class="actions">
    <button type="submit" class="btn" id="submitBtn">‡§∏‡§¨‡§Æ‡§ø‡§ü</button>
    <button type="button" class="btn ghost" id="clearBtn">‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡•ç‡§≤‡§ø‡§Ö‡§∞</button>
    <div class="small">‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§®‡§Ç‡§§‡§∞ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ JSON / CSV ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ‡§Ø‡§≤‡§æ ‡§Æ‡§ø‡§≥‡•á‡§≤ (‡§ë‡§´‡§≤‡§æ‡§á‡§®)</div>
  </div>

  <div id="messageArea" aria-live="polite"></div>
</form>

<footer class="footer">‡§§‡•Å‡§Æ‡•ç‡§π‡•Ä ‡§ú‡§ó‡§æ, ‡§¶‡•Å‡§∏‡§±‡•ç‡§Ø‡§æ‡§≤‡§æ ‡§ú‡§ó‡§µ‡§æ ‚Äî ‡§ú‡§Ø ‡§∏‡§ø‡§Ø‡§æ‡§∞‡§æ‡§Æ</footer>

<template id="modalT">
  <div class="modal" id="modalRoot" role="dialog" aria-modal="true" style="position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;padding:16px">
    <div style="background:#fff;border-radius:12px;padding:16px;max-width:720px;width:100%;">
      <h3 style="margin:0 0 10px 0">‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§§‡§™‡§∂‡•Ä‡§≤</h3>
      <div id="modalContent" style="font-size:13px;color:#222;white-space:pre-wrap;max-height:50vh;overflow:auto"></div>
      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="downloadJson" class="btn">Download JSON</button>
        <button id="downloadCsv" class="btn">Download CSV</button>
        <button id="copyData" class="btn ghost">Copy JSON</button>
        <button id="closeModal" class="btn ghost">Close</button>
      </div>
    </div>
  </div>
</template>

<script>
(function(){
  const form = document.getElementById('regForm');
  const msg = document.getElementById('messageArea');
  const modalT = document.getElementById('modalT');
  const submitBtn = document.getElementById('submitBtn');
  const clearBtn = document.getElementById('clearBtn');

  function validate(fd){
    const name = fd.get('name')?.trim();
    const phone = fd.get('phone')?.trim();
    const age = fd.get('age')?.trim();
    const village = fd.get('village')?.trim();
    if(!name) return '‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§µ ‡§≠‡§∞‡§æ.';
    if(!phone || !/^[0-9]{10}$/.test(phone)) return '‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§µ‡•à‡§ß ‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡§æ.';
    if(!age || !/^[0-9]+$/.test(age)) return '‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§Ø ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§≠‡§∞‡§æ.';
    if(Number(age) < 7) return '‡§â‡§™‡§æ‡§∏‡§ï ‡§¶‡§ø‡§ï‡•ç‡§∑‡§æ ‡§∏‡§æ‡§†‡•Ä ‡§µ‡§Ø ‡§ï‡§ø‡§Æ‡§æ‡§® 7 ‡§µ‡§∞‡•ç‡§∑ ‡§Ö‡§∏‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.';
    if(!village) return '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•Å‡§ï‡•ç‡§ï‡§æ‡§Æ‡§æ‡§ö‡•á ‡§ó‡§æ‡§µ ‡§≠‡§∞‡§æ.';
    return null;
  }

  function toJson(fd){
    const obj = {};
    for(const [k,v] of fd.entries()) obj[k]=v;
    obj.submittedAt = new Date().toISOString();
    return obj;
  }

  function download(filename, content, mime='application/json'){
    const blob = new Blob([content], {type: mime});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = filename;
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  }

  function toCsv(obj){
    const keys = Object.keys(obj);
    const values = keys.map(k=>{
      let val = obj[k]||'';
      val = String(val).replace(/"/g,'""');
      if(val.includes(',')||val.includes('"')||val.includes('\n')) val = `"${val}"`;
      return val;
    });
    return keys.join(',') + "\n" + values.join(',');
  }

  form.addEventListener('submit', function(e){
    e.preventDefault();
    submitBtn.disabled = true;
    msg.innerHTML = '';

    const fd = new FormData(form);
    const err = validate(fd);
    if(err){
      msg.innerHTML = `<div class="success" style="background:#fff0f0;border-left-color:#d63a2a;color:#8a2b1f">${err}</div>`;
      submitBtn.disabled = false;
      return;
    }

    const data = toJson(fd);

    // Send to Google Apps Script
    const params = new URLSearchParams(fd);
    fetch("https://script.google.com/macros/s/AKfycbwYwnoFBWf41ujS6dyeEfMF_4Cug2qLKJpE3yVriinYJf1hlZoWucnErO3u-JQRzzNU/exec", {  // <-- REPLACE with your deployed Web App URL
      method: "POST",
      body: params
    })
    .then(response => response.json())
    .then(res => {
      if(res.status === "success"){
        msg.innerHTML = '<div class="success">‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä! ‚Äî JSON/CSV ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§æ.</div>';
        form.reset();
      } else {
        msg.innerHTML = `<div class="success" style="background:#fff0f0;border-left-color:#d63a2a;color:#8a2b1f">‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: ${res.message}</div>`;
      }
      submitBtn.disabled = false;
    })
    .catch(err => {
      msg.innerHTML = `<div class="success" style="background:#fff0f0;border-left-color:#d63a2a;color:#8a2b1f">‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: ${err.message}</div>`;
      submitBtn.disabled = false;
    });

    // Show modal for JSON/CSV download
    const modal = modalT.content.cloneNode(true);
    document.body.appendChild(modal);
    const modalRoot = document.getElementById('modalRoot');
    const modalContent = document.getElementById('modalContent');
    modalContent.textContent = JSON.stringify(data, null, 2);

    document.getElementById('downloadJson').onclick = ()=> download('registration.json', JSON.stringify(data, null, 2),'application/json');
    document.getElementById('downloadCsv').onclick = ()=> download('registration.csv', toCsv(data),'text/csv');
    document.getElementById('copyData').onclick = async ()=>{
      try{ await navigator.clipboard.writeText(JSON.stringify(data, null, 2)); alert('JSON ‡§ï‡•â‡§™‡•Ä ‡§ù‡§æ‡§≤‡•á.'); }
      catch(e){ alert('‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§Ö‡§°‡§ö‡§£'); }
    };
    document.getElementById('closeModal').onclick = ()=> { modalRoot.remove(); };
  });

  clearBtn.addEventListener('click', ()=>{ if(confirm('‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§æ‡§´ ‡§ï‡§∞‡§æ‡§Ø‡§ö‡§æ ‡§Ü‡§π‡•á ‡§ï‡§æ?')) form.reset(); });

  const phoneInput = document.getElementById('phone');
  phoneInput.addEventListener('input', function(){ this.value = this.value.replace(/\D/g,'').slice(0,10); });

})();
</script>
</body>
</html>


